const Discord = require("discord.js");
const config = require("../config.js");
const staffSchema = require("../Database/Schema/Staff.js");
const moment = require('moment');
var bhey = ((new Date().getDay() === 0) ? (new Date().getDay() += 7) : (new Date().getDay()))

function _0x52f4(_0x2cbcd9,_0x4ee262){var _0x17b921=_0x17b9();return _0x52f4=function(_0x52f43a,_0xa75bd8){_0x52f43a=_0x52f43a-0x154;var _0x43990c=_0x17b921[_0x52f43a];return _0x43990c;},_0x52f4(_0x2cbcd9,_0x4ee262);}(function(_0x14d64c,_0x420004){var _0x1beccc=_0x52f4,_0x2d6da7=_0x14d64c();while(!![]){try{var _0x5de512=parseInt(_0x1beccc(0x16f))/0x1*(parseInt(_0x1beccc(0x18c))/0x2)+-parseInt(_0x1beccc(0x180))/0x3+parseInt(_0x1beccc(0x170))/0x4+-parseInt(_0x1beccc(0x156))/0x5+parseInt(_0x1beccc(0x17f))/0x6*(parseInt(_0x1beccc(0x157))/0x7)+parseInt(_0x1beccc(0x18b))/0x8+-parseInt(_0x1beccc(0x15a))/0x9;if(_0x5de512===_0x420004)break;else _0x2d6da7['push'](_0x2d6da7['shift']());}catch(_0x3c52ac){_0x2d6da7['push'](_0x2d6da7['shift']());}}}(_0x17b9,0x708e1),exports['run']=async(_0x26f591,_0x1f478f)=>{var _0x5a00f5=_0x52f4,_0x496ce3=_0x1f478f[_0x5a00f5(0x16c)][_0x5a00f5(0x186)]('type')[_0x5a00f5(0x155)],_0x56c23e=await staffSchema[_0x5a00f5(0x160)](),_0x21566c=[];for(let _0x2730fb=0x0;_0x2730fb<config[_0x5a00f5(0x18a)][_0x5a00f5(0x154)][_0x5a00f5(0x172)];_0x2730fb++){for(let _0x5f28d7=0x0;_0x5f28d7<_0x1f478f[_0x5a00f5(0x159)][_0x5a00f5(0x15d)][_0x5a00f5(0x17e)][_0x5a00f5(0x186)](config['support'][_0x5a00f5(0x154)][_0x2730fb])[_0x5a00f5(0x17d)][_0x5a00f5(0x16e)](_0x4fa2da=>_0x4fa2da)['length'];_0x5f28d7++){!_0x21566c[_0x5a00f5(0x184)](_0x345a60=>_0x345a60['id']===_0x1f478f[_0x5a00f5(0x159)]['roles'][_0x5a00f5(0x17e)][_0x5a00f5(0x186)](config[_0x5a00f5(0x18a)][_0x5a00f5(0x154)][_0x2730fb])[_0x5a00f5(0x17d)][_0x5a00f5(0x16e)](_0x5b1c2c=>_0x5b1c2c)[_0x5f28d7]['user']['id'])&&_0x21566c[_0x5a00f5(0x164)](_0x1f478f['guild'][_0x5a00f5(0x15d)][_0x5a00f5(0x17e)][_0x5a00f5(0x186)](config[_0x5a00f5(0x18a)][_0x5a00f5(0x154)][_0x2730fb])[_0x5a00f5(0x17d)][_0x5a00f5(0x16e)](_0xb6eaf8=>_0xb6eaf8)[_0x5f28d7][_0x5a00f5(0x167)]);}}if(_0x21566c[_0x5a00f5(0x172)]===0x0)return _0x1f478f[_0x5a00f5(0x17c)](config[_0x5a00f5(0x158)][_0x5a00f5(0x15f)][_0x5a00f5(0x163)][_0x5a00f5(0x169)]);var _0x46552e=[];if(_0x496ce3===_0x5a00f5(0x188))var _0x39effb=moment()[_0x5a00f5(0x185)](_0x5a00f5(0x16b)),_0x4c8a9f=_0x56c23e['filter'](_0xdcd591=>_0xdcd591['date'][_0x5a00f5(0x178)](_0x39effb));else{if(_0x496ce3===_0x5a00f5(0x161)){var _0x25420f=new Date()[_0x5a00f5(0x17b)]();_0x25420f===0x0?_0x25420f+=0x7:'';var _0x7eb10b=[];listDays(bhey)[_0x5a00f5(0x17a)](_0x3a3f09=>{var _0x3da49a=_0x5a00f5;_0x7eb10b[_0x3da49a(0x164)](moment(_0x3a3f09)[_0x3da49a(0x185)]('DD'));});var _0x4c8a9f=_0x56c23e[_0x5a00f5(0x174)](_0x3cc9b0=>_0x7eb10b[_0x5a00f5(0x184)](_0x12f3de=>_0x3cc9b0[_0x5a00f5(0x18d)][_0x5a00f5(0x178)]('-'+_0x12f3de+'/'+moment()[_0x5a00f5(0x185)]('MM')+'/'+moment()['format'](_0x5a00f5(0x187)))));}else{if(_0x496ce3==='mmmm')var _0x45b74f=moment()[_0x5a00f5(0x185)]('MM'),_0x4c8a9f=_0x56c23e[_0x5a00f5(0x174)](_0x5b0f5f=>_0x5b0f5f['date'][_0x5a00f5(0x178)]('/'+_0x45b74f+'/'+moment()['format'](_0x5a00f5(0x187))));else{if(_0x496ce3==='llll')var _0x4c8a9f=_0x56c23e;}}}for(let _0x5477e0=0x0;_0x5477e0<_0x21566c[_0x5a00f5(0x172)];_0x5477e0++){var _0x2313c0=_0x4c8a9f['filter'](_0x538abe=>_0x538abe[_0x5a00f5(0x15e)]===_0x21566c[_0x5477e0]['id']),_0x357c0a={'uid':_0x21566c[_0x5477e0]['id'],'puan':_0x2313c0['length']};_0x46552e[_0x5a00f5(0x164)](_0x357c0a);}_0x46552e[_0x5a00f5(0x179)](function(_0x6eb285,_0x355653){var _0x1929ec=_0x5a00f5;return _0x355653[_0x1929ec(0x173)]-_0x6eb285[_0x1929ec(0x173)];});var _0x449918=[];for(let _0x2ff1d1=0x0;_0x2ff1d1<_0x46552e[_0x5a00f5(0x172)];_0x2ff1d1++){_0x449918[_0x5a00f5(0x164)](_0x2ff1d1+0x1+_0x5a00f5(0x16d)+_0x46552e[_0x2ff1d1][_0x5a00f5(0x15b)]+_0x5a00f5(0x165)+_0x46552e[_0x2ff1d1][_0x5a00f5(0x173)]+'`');}var _0x5e27f5=new Discord[(_0x5a00f5(0x182))]()['setColor'](config[_0x5a00f5(0x158)][_0x5a00f5(0x15f)]['staffstats'][_0x5a00f5(0x162)][_0x5a00f5(0x176)])['setAuthor']({'name':config[_0x5a00f5(0x158)]['commands'][_0x5a00f5(0x163)]['embed'][_0x5a00f5(0x189)]+_0x496ce3[_0x5a00f5(0x171)](_0x5a00f5(0x188),'Günlük')[_0x5a00f5(0x171)](_0x5a00f5(0x161),'Haftalık')[_0x5a00f5(0x171)](_0x5a00f5(0x16a),_0x5a00f5(0x183))['replace'](_0x5a00f5(0x177),'Tüm\x20Zamanlar')})[_0x5a00f5(0x168)](_0x449918['join']('\x0a'))[_0x5a00f5(0x166)]({'text':config['messages'][_0x5a00f5(0x15f)]['staffstats'][_0x5a00f5(0x162)][_0x5a00f5(0x181)]});_0x1f478f[_0x5a00f5(0x17c)]({'embeds':[_0x5e27f5]});});function listDays(_0x24a23a){var _0x3b17a7=_0x52f4,_0x8802b0=[],_0x50b269=0x6-(0x7-_0x24a23a);for(let _0x4480f0=0x0;_0x4480f0<0x7;_0x4480f0++){_0x8802b0[_0x3b17a7(0x164)](_0x4480f0-_0x50b269<0x0?moment()[_0x3b17a7(0x175)](_0x4480f0-_0x50b269*-0x1,_0x3b17a7(0x15c)):moment()['add'](_0x4480f0-_0x50b269,_0x3b17a7(0x15c)));}return _0x8802b0;}function _0x17b9(){var _0x208c43=['staffstats','push','>\x20→\x20`','setFooter','user','setDescription','err','mmmm','-DD/MM/YYYY','options','.\x20<@','map','7uBZtKr','1708536zZeVQD','replace','length','puan','filter','subtract','color','llll','includes','sort','forEach','getDay','reply','members','cache','5246778bNyYiu','899523dBPraA','footer','EmbedBuilder','Aylık','some','format','get','YYYY','dddd','author','support','1288656pnGkSQ','120628UcROWx','date','staffRoles','value','1310265bmecWc','7iGmgfK','messages','guild','7757622NkyQNl','uid','days','roles','userId','commands','find','wwww','embed'];_0x17b9=function(){return _0x208c43;};return _0x17b9();}

const cmd = new Discord.SlashCommandBuilder()
.setDMPermission(false)
.setName("staffstats")
.setDescription("Yetkili istatistiklerini listelersiniz.")
.setDefaultMemberPermissions(8)
.addStringOption(new Discord.SlashCommandStringOption()
    .setRequired(true)
    .setName("type")
    .setDescription("Nasıl Listelemek İstediğinizi Seçin")
    .addChoices(
        {
            name: "daily",
            value: "dddd"
        },
        {
            name: "weekly",
            value: "wwww"
        },
        {
            name: "monthly",
            value: "mmmm"
        },
        {
            name: "alltime",
            value: "llll"
        }
    )
)

exports.data = cmd.toJSON()